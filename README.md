# Works Tracker

## Обзор
Works Tracker API — это backend на основе Django REST Framework для управления задачами сотрудников. Можно создавать задачи, назначать их сотрудникам, отслеживать статус задач и получать информацию о занятости сотрудников.

## Установка и настройка с Docker

### 1. Клонирование репозитория

```bash
git clone git@github.com:DenisAnufriev/works_tracker.git
cd works_tracker

### 2. Копирование файла env.example в .env
Откройте .env и замените значения переменных на свои собственные:
```bash
cp .env.example .env
```

### 2.1 Настройка переменных окружения

# .env файл
- SECRET_KEY=секретный_ключ_для_Django
- DEBUG=True # Установите False в продакшене
- POSTGRES_USER=имя_пользователя_PostgreSQL
- POSTGRES_PASSWORD=пароль_для_PostgreSQL
- POSTGRES_DB=название_базы_данных

### 3. Сборка и запуск Docker-контейнеров
Выполните следующую команду для сборки образов Docker:
```bash
docker-compose build
```
Запустите приложение и его зависимости:
```bash
docker-compose up
```

Сервер будет доступен по адресу: http://127.0.0.1:8000

### 4. Тестирование приложения
Запустите тесты.
Эта команда выполнит тесты Django и соберет данные о покрытии кода:
```bash
docker exec -it django coverage run -m pytest
docker exec -it django coverage report
```
### 4.1 Дополнительные шаги
Если вы хотите сгенерировать HTML-отчёт по покрытию, используйте:
```bash
docker exec -it django coverage html
```
Это создаст отчёт в формате HTML в директории htmlcov, который можно будет открыть через браузер.

### 5. Остановка и очистка Docker-контейнеров
Для остановки запущенных контейнеров используйте:
```bash
docker-compose down
```
При необходимости удалите неиспользуемые контейнеры и образы для освобождения места:
```bash
docker system prune -a
```

### 6. Документация
Полная документация API доступна по адресу: http://127.0.0.1:8000/swagger/

### 7. Инструкция если нужно выполнить миграции вручную:

# Создание миграций
docker exec -it django python manage.py makemigrations

# Применение миграций
docker exec -it django python manage.py migrate



### Структура проекта
- tracker/: Основное приложение, которое управляет задачами и сотрудниками.
- tracker/serializers.py: Сериализаторы для преобразования данных между моделями и JSON.
- tracker/views.py: Представления, обрабатывающие API-запросы.
- tracker/models.py: Модели для задач и сотрудников.
- tracker/tests.py: Тесты для API.
- docker-compose.yml: Конфигурация для Docker-контейнеров.
- Dockerfile: Конфигурация для сборки Docker-образа.

- /employees/ — для всех сотрудников.
- /employees/{id}/ — для получения, обновления или удаления конкретного сотрудника.
- /tasks/ — для всех задач.
- /tasks/{id}/ — для получения, обновления или удаления конкретной задачи.



### Описание задачи:

Необходимо реализовать серверное приложение для работы с базой данных, представляющее собой трекер задач сотрудников. Приложение должно обеспечивать CRUD операции для сотрудников и задач, а также предоставлять два специальных эндпоинта для получения информации о загруженности сотрудников и важных задачах.

Трекер задач позволит компании эффективно управлять заданиями, назначенными сотрудникам, и обеспечивать прозрачность процессов выполнения задач. Это поможет в равномерном распределении нагрузки между сотрудниками и своевременном выполнении ключевых задач.

 

### Задача:

**Требования к базе данных:**

1. **БД реляционная:** 
   - Использовать PostgreSQL.
2. **Структура базы данных:** 
   - Таблица сотрудников: 
     - ФИО
     - Должность
     - Дополнительные поля (по необходимости)
   - Таблица задач: 
     - Наименование
     - Ссылка на родительскую задачу (если есть зависимость)
     - Исполнитель
     - Срок
     - Статус
     - Дополнительные поля (по необходимости)

 

**Функциональность:**

1. **CRUD для сотрудников и задач:** 
   - Реализовать стандартные операции создания, чтения, обновления и удаления записей для таблиц сотрудников и задач.
2. **Специальные эндпоинты:** 
   - **Занятые сотрудники:** 
     - Запрашивает из БД список сотрудников и их задачи, отсортированный по количеству активных задач.
   - **Важные задачи:** 
     1. Запрашивает из БД задачи, которые не взяты в работу, но от которых зависят другие задачи, взятые в работу.
     2. Реализует поиск по сотрудникам, которые могут взять такие задачи (наименее загруженный сотрудник или сотрудник, выполняющий родительскую задачу, если ему назначено максимум на 2 задачи больше, чем у наименее загруженного сотрудника).
     3. Возвращает список объектов в формате: `{Важная задача, Срок, [ФИО сотрудника]}`.

 

**Технические требования:**

 1. **Язык программирования:** 
    - Python 3.11
 2. **Фреймворк:** 
    - Django для реализации REST API с использованием Django REST Framework (DRF)
 3. **База данных:** 
    - PostgreSQL для хранения данных
 4. **ORM:** 
    - Django ORM для взаимодействия с базой данных
 5. **Контейнеризация:** 
    - Docker для контейнеризации приложения
 6. **Валидация данных:** 
    - Реализовать валидацию данных входящих запросов.
 7. **Документация:** 
    - В корне проекта должен быть файл README.md с описанием структуры проекта, инструкциями по установке и запуску, а также описанием API.
 8. **Качество кода:** 
    - Соблюдать стандарты PEP8 для Python кода.
    - Весь код должен храниться в удаленном Git репозитории.
 9. **Тестирование:** 
    - Написать тесты для всех основных функций платформы.
    - Покрытие тестами должно быть минимум 75%.
10. **Автодокументация:** 
    - Реализовать автогенерируемую документацию API с использованием Swagger или ReDoc.

   